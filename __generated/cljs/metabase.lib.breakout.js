var window=global;var $CLJS=require("./cljs_env.js");require("./cljs.core.js");require("./clojure.string.js");require("./metabase.lib.equality.js");require("./metabase.lib.metadata.calculation.js");require("./metabase.lib.ref.js");require("./metabase.lib.remove_replace.js");require("./metabase.lib.schema.js");require("./metabase.lib.schema.expression.js");require("./metabase.lib.schema.metadata.js");require("./metabase.lib.schema.ref.js");require("./metabase.lib.temporal_bucket.js");require("./metabase.lib.util.js");require("./metabase.shared.util.i18n.js");require("./metabase.util.malli.js");
'use strict';var Asa,Bsa;
Asa=function(a,b){return function f(d,e){return new $CLJS.pe(null,function(){var k=$CLJS.y(e);if(k){if($CLJS.Bd(k)){for(var l=$CLJS.mc(k),m=$CLJS.D(l),t=$CLJS.se(m),u=0;;)if(u<m){var v=function(){var x=d+u,A=$CLJS.ld(l,u);return a.g?a.g(x,A):a.call(null,x,A)}();null!=v&&t.add(v);u+=1}else break;return $CLJS.ve($CLJS.xe(t),f(d+m,$CLJS.nc(k)))}m=function(){var x=$CLJS.z(k);return a.g?a.g(d,x):a.call(null,d,x)}();return null==m?f(d+1,$CLJS.Mc(k)):$CLJS.ge(m,f(d+1,$CLJS.Mc(k)))}return null},null,null)}(0,
b)};$CLJS.l5=function(a,b){return $CLJS.k1($CLJS.Gq,new $CLJS.Q(null,2,5,$CLJS.R,[a,b],null))};$CLJS.m5=function(a,b){return $CLJS.k1($CLJS.Eq,new $CLJS.Q(null,2,5,$CLJS.R,[a,b],null))};Bsa=new $CLJS.M(null,"same-temporal-bucket?","same-temporal-bucket?",2110106995);$CLJS.H_.m(null,$CLJS.$E,function(a,b){var c=$CLJS.Ie($CLJS.$E.h($CLJS.DV(a,b)));return $CLJS.n(c)?$CLJS.iD("Grouped by {0}",$CLJS.H([$CLJS.gs([" ",$CLJS.p.h($CLJS.LD("and"))," "].join(""),function(){return function f(e){return new $CLJS.pe(null,function(){for(;;){var k=$CLJS.y(e);if(k){if($CLJS.Bd(k)){var l=$CLJS.mc(k),m=$CLJS.D(l),t=$CLJS.se(m);a:for(var u=0;;)if(u<m){var v=$CLJS.ld(l,u);v=$CLJS.e_.v(a,b,v,$CLJS.f_);t.add(v);u+=1}else{l=!0;break a}return l?$CLJS.ve($CLJS.xe(t),f($CLJS.nc(k))):$CLJS.ve($CLJS.xe(t),
null)}t=$CLJS.z(k);return $CLJS.ge($CLJS.e_.v(a,b,t,$CLJS.f_),f($CLJS.Mc(k)))}return null}},null,null)}(c)}())])):null});$CLJS.n5=function(){function a(d,e,f){f=$CLJS.oV($CLJS.nd(f)?f.g?f.g(d,e):f.call(null,d,e):f);return $CLJS.o1(d,e,$CLJS.$E,f)}function b(d,e){return c.j?c.j(d,-1,e):c.call(null,d,-1,e)}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+arguments.length);};c.g=b;c.j=a;return c}();
$CLJS.o5=function(){function a(d,e){return $CLJS.Ie($CLJS.$E.h($CLJS.DV(d,e)))}function b(d){return c.g?c.g(d,-1):c.call(null,d,-1)}var c=null;c=function(d,e){switch(arguments.length){case 1:return b.call(this,d);case 2:return a.call(this,d,e)}throw Error("Invalid arity: "+arguments.length);};c.h=b;c.g=a;return c}();
$CLJS.p5=function(){function a(d,e){var f=$CLJS.o5.g(d,e);return null==f?null:$CLJS.jk.g(function(k){return $CLJS.T.j($CLJS.c_.j(d,e,k),$CLJS.IJ,$CLJS.ZJ)},f)}function b(d){return c.g?c.g(d,-1):c.call(null,d,-1)}var c=null;c=function(d,e){switch(arguments.length){case 1:return b.call(this,d);case 2:return a.call(this,d,e)}throw Error("Invalid arity: "+arguments.length);};c.h=b;c.g=a;return c}();
$CLJS.q5=function(){function a(d,e){var f=function(){var l=$CLJS.DV(d,e);return $CLJS.P_.v(d,e,l,new $CLJS.h(null,1,[$CLJS.B_,!1],null))}();if($CLJS.y(f)){var k=$CLJS.gg.g($CLJS.N,Asa(function(l,m){m=$CLJS.x1.M(d,e,m,f,new $CLJS.h(null,1,[$CLJS.u1,!0],null));return $CLJS.n(m)?new $CLJS.Q(null,2,5,$CLJS.R,[m,l],null):null},function(){var l=$CLJS.o5.g(d,e);return $CLJS.n(l)?l:$CLJS.Ef}()));return $CLJS.jk.g(function(l){var m=k.h?k.h(l):k.call(null,l);return $CLJS.n(m)?$CLJS.T.j(l,$CLJS.n_,m):l},f)}return null}
function b(d){return c.g?c.g(d,-1):c.call(null,d,-1)}var c=null;c=function(d,e){switch(arguments.length){case 1:return b.call(this,d);case 2:return a.call(this,d,e)}throw Error("Invalid arity: "+arguments.length);};c.h=b;c.g=a;return c}();
$CLJS.r5=function(){function a(d,e,f,k){k=$CLJS.O(k);var l=$CLJS.J.g(k,Bsa);return $CLJS.Ie($CLJS.gg.j($CLJS.Ef,$CLJS.mf(function(m){var t=$CLJS.x1.M(d,e,m,new $CLJS.Q(null,1,5,$CLJS.R,[f],null),new $CLJS.h(null,1,[$CLJS.u1,!0],null));return $CLJS.n(t)?$CLJS.n(l)?$CLJS.E.g($CLJS.c2(m),$CLJS.c2(f)):!0:t}),$CLJS.o5.g(d,e)))}function b(d,e,f){return c.v?c.v(d,e,f,null):c.call(null,d,e,f,null)}var c=null;c=function(d,e,f,k){switch(arguments.length){case 3:return b.call(this,d,e,f);case 4:return a.call(this,
d,e,f,k)}throw Error("Invalid arity: "+arguments.length);};c.j=b;c.v=a;return c}();$CLJS.s5=function(){function a(d,e,f){return $CLJS.fb(function(k,l){return $CLJS.h5.j(k,e,l)},d,$CLJS.r5.j(d,e,f))}function b(d,e){return c.j?c.j(d,-1,e):c.call(null,d,-1,e)}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+arguments.length);};c.g=b;c.j=a;return c}();