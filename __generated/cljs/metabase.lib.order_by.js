var window=global;var $CLJS=require("./cljs_env.js");require("./cljs.core.js");require("./metabase.lib.aggregation.js");require("./metabase.lib.breakout.js");require("./metabase.lib.dispatch.js");require("./metabase.lib.equality.js");require("./metabase.lib.hierarchy.js");require("./metabase.lib.metadata.js");require("./metabase.lib.metadata.calculation.js");require("./metabase.lib.options.js");require("./metabase.lib.ref.js");require("./metabase.lib.schema.js");require("./metabase.lib.schema.expression.js");require("./metabase.lib.schema.order_by.js");require("./metabase.lib.util.js");require("./metabase.mbql.util.match.js");require("./metabase.shared.util.i18n.js");require("./metabase.util.malli.js");
'use strict';var jta=function(a){a=$CLJS.O(a);var b=$CLJS.J.g(a,$CLJS.nA);return $CLJS.Ue(function(c){return $CLJS.nB(b,c)},$CLJS.lE)},t7=new $CLJS.M("metabase.lib.order-by","order-by-clause","metabase.lib.order-by/order-by-clause",774979647);$CLJS.rE($CLJS.iF,t7);$CLJS.rE($CLJS.bF,t7);
$CLJS.H_.m(null,$CLJS.LQ,function(a,b){var c=$CLJS.Ie($CLJS.LQ.h($CLJS.DV(a,b)));return $CLJS.n(c)?$CLJS.iD("Sorted by {0}",$CLJS.H([$CLJS.m1($CLJS.LD("and"),function(){return function f(e){return new $CLJS.pe(null,function(){for(;;){var k=$CLJS.y(e);if(k){if($CLJS.Bd(k)){var l=$CLJS.mc(k),m=$CLJS.D(l),t=$CLJS.se(m);a:for(var u=0;;)if(u<m){var v=$CLJS.ld(l,u);v=$CLJS.e_.v(a,b,v,$CLJS.f_);t.add(v);u+=1}else{l=!0;break a}return l?$CLJS.ve($CLJS.xe(t),f($CLJS.nc(k))):$CLJS.ve($CLJS.xe(t),null)}t=$CLJS.z(k);
return $CLJS.ge($CLJS.e_.v(a,b,t,$CLJS.f_),f($CLJS.Mc(k)))}return null}},null,null)}(c)}())])):null});$CLJS.E_.m(null,t7,function(a,b,c,d){var e=$CLJS.I(c,0,null);$CLJS.I(c,1,null);c=$CLJS.I(c,2,null);a=$CLJS.e_.v(a,b,c,d);e=e instanceof $CLJS.M?e.S:null;switch(e){case "asc":return $CLJS.iD("{0} ascending",$CLJS.H([a]));case "desc":return $CLJS.iD("{0} descending",$CLJS.H([a]));default:throw Error(["No matching clause: ",$CLJS.p.h(e)].join(""));}});
$CLJS.L_.m(null,t7,function(a,b,c){var d=$CLJS.I(c,0,null);$CLJS.I(c,1,null);c=$CLJS.I(c,2,null);return $CLJS.T.j($CLJS.h_.j(a,b,c),$CLJS.s_,d)});var u7,kta=$CLJS.Ze($CLJS.N),lta=$CLJS.Ze($CLJS.N),mta=$CLJS.Ze($CLJS.N),nta=$CLJS.Ze($CLJS.N),ota=$CLJS.J.j(new $CLJS.h(null,1,[$CLJS.Jk,$CLJS.bB],null),$CLJS.Jk,$CLJS.Xh.o?$CLJS.Xh.o():$CLJS.Xh.call(null));u7=new $CLJS.fi($CLJS.Hh.g("metabase.lib.order-by","order-by-clause-method"),$CLJS.SA,ota,kta,lta,mta,nta);u7.m(null,t7,function(a){return $CLJS.nV(a)});
u7.m(null,$CLJS.ei,function(a){if(null==a)throw $CLJS.ji($CLJS.LD("Can''t order by nil"),$CLJS.N);return $CLJS.nV(new $CLJS.Q(null,2,5,$CLJS.R,[$CLJS.iF,$CLJS.oV(a)],null))});
$CLJS.v7=function(){function a(d,e){d=u7.h(d);e=$CLJS.n(e)?e:$CLJS.iF;return $CLJS.T.j($CLJS.Ff(d),0,e)}function b(d){return c.g?c.g(d,$CLJS.iF):c.call(null,d,$CLJS.iF)}var c=null;c=function(d,e){switch(arguments.length){case 1:return b.call(this,d);case 2:return a.call(this,d,e)}throw Error("Invalid arity: "+arguments.length);};c.h=b;c.g=a;return c}();
$CLJS.w7=function(){function a(e,f,k,l){f=$CLJS.n(f)?f:-1;var m=function(){var t=u7.h(k);return $CLJS.n(l)?$CLJS.T.j($CLJS.Ff(t),0,l):t}();return $CLJS.PV.l(e,f,$CLJS.kk,$CLJS.H([$CLJS.LQ,function(t){return $CLJS.de.g($CLJS.Ff(t),m)}]))}function b(e,f,k){return d.v?d.v(e,-1,f,k):d.call(null,e,-1,f,k)}function c(e,f){return d.v?d.v(e,-1,f,null):d.call(null,e,-1,f,null)}var d=null;d=function(e,f,k,l){switch(arguments.length){case 2:return c.call(this,e,f);case 3:return b.call(this,e,f,k);case 4:return a.call(this,
e,f,k,l)}throw Error("Invalid arity: "+arguments.length);};d.g=c;d.j=b;d.v=a;return d}();$CLJS.x7=function(){function a(d,e){return $CLJS.Ie($CLJS.J.g($CLJS.DV(d,e),$CLJS.LQ))}function b(d){return c.g?c.g(d,-1):c.call(null,d,-1)}var c=null;c=function(d,e){switch(arguments.length){case 1:return b.call(this,d);case 2:return a.call(this,d,e)}throw Error("Invalid arity: "+arguments.length);};c.h=b;c.g=a;return c}();
$CLJS.y7=function(){function a(d,e){var f=$CLJS.Ie($CLJS.p5.g(d,e)),k=$CLJS.Ie($CLJS.W3.g(d,e));f=$CLJS.n($CLJS.n(f)?f:k)?$CLJS.jf.g(f,k):function(){var t=$CLJS.DV(d,e);return $CLJS.P_.v(d,e,t,new $CLJS.h(null,1,[$CLJS.B_,!1],null))}();var l=$CLJS.nf(jta,f);f=$CLJS.kf.g(function(t){$CLJS.I(t,0,null);$CLJS.I(t,1,null);return $CLJS.I(t,2,null)},$CLJS.x7.g(d,e));if($CLJS.ud(l))return null;if($CLJS.ud(f))return $CLJS.Ff(l);var m=$CLJS.gg.j($CLJS.N,$CLJS.hk.g($CLJS.kf.h($CLJS.oV),$CLJS.EX(function(t,u){u=
$CLJS.x1.v(d,e,u,l);return $CLJS.n(u)?new $CLJS.Q(null,2,5,$CLJS.R,[u,t],null):null})),f);return $CLJS.jk.g(function(t){var u=m.h?m.h(t):m.call(null,t);return $CLJS.n(u)?$CLJS.T.j(t,$CLJS.o_,u):t},l)}function b(d){return c.g?c.g(d,-1):c.call(null,d,-1)}var c=null;c=function(d,e){switch(arguments.length){case 1:return b.call(this,d);case 2:return a.call(this,d,e)}throw Error("Invalid arity: "+arguments.length);};c.h=b;c.g=a;return c}();
$CLJS.z7=new $CLJS.h(null,2,[$CLJS.iF,$CLJS.bF,$CLJS.bF,$CLJS.iF],null);