var window=global;var $CLJS=require("./cljs_env.js");require("./cljs.core.js");require("./malli.core.js");require("./metabase.lib.schema.common.js");require("./metabase.lib.schema.expression.js");require("./metabase.types.js");require("./metabase.util.malli.js");require("./metabase.util.malli.registry.js");
'use strict';var mE,vE,sE,Cga;mE=function(a){if(null!=a&&null!=a.ia)a=a.cache;else{var b=mE[$CLJS.xa(null==a?null:a)];if(null!=b)a=b.h?b.h(a):b.call(null,a);else if(b=mE._,null!=b)a=b.h?b.h(a):b.call(null,a);else throw $CLJS.cb("Cached.-cache",a);}return a};
$CLJS.nE=function(a,b,c){if(null!=a&&$CLJS.Cc===a.Wa){var d=mE(a);var e=$CLJS.q(d);e=e.h?e.h(b):e.call(null,b);if($CLJS.n(e))return e;a=$CLJS.Qh.v(d,$CLJS.T,b,c.h?c.h(a):c.call(null,a));return a.h?a.h(b):a.call(null,b)}return c.h?c.h(a):c.call(null,a)};$CLJS.pE=function(a,b,c){a=$CLJS.oE.g(a,c);return a.h?a.h(b):a.call(null,b)};$CLJS.qE=function(a,b){return $CLJS.pE(a,b,null)};$CLJS.rE=function(a,b){$CLJS.Qh.v($CLJS.bB,$CLJS.aA,a,b)};$CLJS.tE=function(a,b){a=sE(a,b);return $CLJS.n(a)?a:$CLJS.lj};
vE=function(){return $CLJS.gg.j(new $CLJS.Q(null,3,5,$CLJS.R,[$CLJS.lr,new $CLJS.h(null,2,[$CLJS.Ji,$CLJS.z,$CLJS.Ds,function(a){a=$CLJS.O(a);a=$CLJS.J.g(a,$CLJS.nj);return $CLJS.Ad(a)?["Invalid ",$CLJS.Oh.l($CLJS.H([$CLJS.z(a)]))," clause: ",$CLJS.Oh.l($CLJS.H([a]))].join(""):"not an MBQL clause"}],null),new $CLJS.Q(null,2,5,$CLJS.R,[$CLJS.Yn,new $CLJS.Q(null,3,5,$CLJS.R,[$CLJS.Mi,new $CLJS.h(null,1,[$CLJS.ss,"not a known MBQL clause"],null),$CLJS.We(!1)],null)],null)],null),$CLJS.kf.h(function(a){return new $CLJS.Q(null,
2,5,$CLJS.R,[a,new $CLJS.Q(null,2,5,$CLJS.R,[$CLJS.W,$CLJS.Bh.g("mbql.clause",$CLJS.ih(a))],null)],null)}),$CLJS.q(uE))};$CLJS.yE=function(a,b){$CLJS.P.v(wE,xE,a,b)};$CLJS.AE=function(a,b){$CLJS.P.v(wE,zE,a,b)};$CLJS.to.prototype.ia=$CLJS.wa(26,function(){return this.cache});$CLJS.vo.prototype.ia=$CLJS.wa(25,function(){return this.cache});$CLJS.xo.prototype.ia=$CLJS.wa(24,function(){return this.cache});$CLJS.zo.prototype.ia=$CLJS.wa(23,function(){return this.cache});
$CLJS.Bo.prototype.ia=$CLJS.wa(22,function(){return this.cache});$CLJS.Do.prototype.ia=$CLJS.wa(21,function(){return this.cache});$CLJS.Go.prototype.ia=$CLJS.wa(20,function(){return this.cache});$CLJS.Io.prototype.ia=$CLJS.wa(19,function(){return this.cache});$CLJS.Ko.prototype.ia=$CLJS.wa(18,function(){return this.cache});$CLJS.Mo.prototype.ia=$CLJS.wa(17,function(){return this.cache});$CLJS.Oo.prototype.ia=$CLJS.wa(16,function(){return this.cache});$CLJS.Qo.prototype.ia=$CLJS.wa(15,function(){return this.cache});
$CLJS.So.prototype.ia=$CLJS.wa(14,function(){return this.cache});$CLJS.Uo.prototype.ia=$CLJS.wa(13,function(){return this.cache});$CLJS.Wo.prototype.ia=$CLJS.wa(12,function(){return this.cache});$CLJS.Yo.prototype.ia=$CLJS.wa(11,function(){return this.cache});$CLJS.ap.prototype.ia=$CLJS.wa(10,function(){return this.cache});$CLJS.fp.prototype.ia=$CLJS.wa(9,function(){return this.cache});$CLJS.hp.prototype.ia=$CLJS.wa(8,function(){return this.cache});$CLJS.kp.prototype.ia=$CLJS.wa(7,function(){return this.cache});
$CLJS.up.prototype.ia=$CLJS.wa(6,function(){return this.cache});$CLJS.WC.prototype.ia=$CLJS.wa(5,function(){return this.cache});$CLJS.oE=function oE(a){switch(arguments.length){case 1:return oE.h(arguments[0]);case 2:return oE.g(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$CLJS.p.h(arguments.length)].join(""));}};$CLJS.oE.h=function(a){return $CLJS.oE.g(a,null)};$CLJS.oE.g=function(a,b){return $CLJS.nE($CLJS.Fn.g(a,b),$CLJS.Qj,$CLJS.Jm)};$CLJS.oE.A=2;
$CLJS.BE=function BE(a,b){return $CLJS.Yh($CLJS.PC,a,b)||$CLJS.Fd($CLJS.Ue(function(d){return BE.g?BE.g(a,d):BE.call(null,a,d)},$CLJS.Ck.h(b)))||$CLJS.Fd($CLJS.Ue(function(d){return BE.g?BE.g(d,b):BE.call(null,d,b)},$CLJS.$h(a)))};
sE=function sE(a,b){return $CLJS.E.g(a,$CLJS.lj)?null:$CLJS.E.g(b,$CLJS.lj)?null:$CLJS.BE(a,b)?b:$CLJS.BE(b,a)?a:$CLJS.Ue(function(d){return $CLJS.Ue(function(e){return $CLJS.E.g(new $CLJS.Q(null,2,5,$CLJS.R,[d,e],null),new $CLJS.Q(null,2,5,$CLJS.R,[a,b],null))?null:sE.g?sE.g(d,e):sE.call(null,d,e)},$CLJS.ge(b,$CLJS.$h(b)))},$CLJS.ge(a,$CLJS.$h(a)))};$CLJS.CE=new $CLJS.M(null,"exp","exp",-261706262);$CLJS.DE=new $CLJS.M(null,"substring","substring",1140866276);
$CLJS.EE=new $CLJS.M(null,"dimension","dimension",543254198);$CLJS.FE=new $CLJS.M(null,"basic-aggregations","basic-aggregations",-1628959228);$CLJS.GE=new $CLJS.M(null,"ceil","ceil",-1824929952);$CLJS.HE=new $CLJS.M(null,"query","query",-1288509510);$CLJS.IE=new $CLJS.M(null,"power","power",-937852079);$CLJS.JE=new $CLJS.M(null,"segment","segment",-964921196);$CLJS.KE=new $CLJS.M(null,"concat","concat",-2108183992);$CLJS.LE=new $CLJS.M(null,"abs","abs",-246026477);
$CLJS.ME=new $CLJS.M(null,"is-null","is-null",-1997050930);$CLJS.NE=new $CLJS.M(null,"between","between",1131099276);$CLJS.OE=new $CLJS.M(null,"is-empty","is-empty",-1040302908);$CLJS.PE=new $CLJS.M(null,"filter","filter",-948537934);$CLJS.QE=new $CLJS.M(null,"distinct","distinct",-1788879121);$CLJS.RE=new $CLJS.M(null,"var","var",-769682797);$CLJS.SE=new $CLJS.M(null,"next","next",-117701485);$CLJS.TE=new $CLJS.M(null,"inside","inside",1972503011);$CLJS.UE=new $CLJS.M(null,"case","case",1143702196);
$CLJS.VE=new $CLJS.M(null,"not-empty","not-empty",388922063);$CLJS.WE=new $CLJS.M(null,"column-name","column-name",551523580);$CLJS.XE=new $CLJS.M(null,"percentile","percentile",-601188752);$CLJS.YE=new $CLJS.M(null,"not-null","not-null",-1326718535);$CLJS.ZE=new $CLJS.M(null,"sqrt","sqrt",-1270051929);$CLJS.$E=new $CLJS.M(null,"breakout","breakout",-732419050);$CLJS.aF=new $CLJS.M(null,"aggregation","aggregation",1597476696);$CLJS.bF=new $CLJS.M(null,"desc","desc",2093485764);
$CLJS.cF=new $CLJS.M(null,"starts-with","starts-with",366503009);$CLJS.dF=new $CLJS.M(null,"does-not-contain","does-not-contain",-274946853);$CLJS.eF=new $CLJS.M(null,"short","short",1928760516);$CLJS.fF=new $CLJS.M(null,"avg","avg",197406200);$CLJS.gF=new $CLJS.M(null,"metric","metric",408798077);$CLJS.hF=new $CLJS.M(null,"percentile-aggregations","percentile-aggregations",1241763983);$CLJS.iF=new $CLJS.M(null,"asc","asc",356854569);$CLJS.jF=new $CLJS.M(null,"floor","floor",1882041021);
$CLJS.kF=new $CLJS.M(null,"contains","contains",676899812);$CLJS.lF=new $CLJS.M(null,"field","field",-1302436500);$CLJS.mF=new $CLJS.M(null,"cum-count","cum-count",-1964431543);$CLJS.nF=new $CLJS.M(null,"regex-match-first","regex-match-first",-657299718);$CLJS.oF=new $CLJS.M(null,"coalesce","coalesce",654622029);$CLJS.pF=new $CLJS.M("metabase.lib.schema.ref","ref","metabase.lib.schema.ref/ref",-1124116498);$CLJS.qF=new $CLJS.M(null,"round","round",2009433328);
$CLJS.rF=new $CLJS.M(null,"temporal-unit","temporal-unit",-1892306358);$CLJS.sF=new $CLJS.M(null,"share","share",-589433933);$CLJS.tF=new $CLJS.M(null,"case-sensitive","case-sensitive",-1005239404);$CLJS.uF=new $CLJS.M(null,"count-where","count-where",385407720);$CLJS.vF=new $CLJS.M(null,"standard-deviation-aggregations","standard-deviation-aggregations",-1683333464);$CLJS.wF=new $CLJS.M(null,"ends-with","ends-with",-456791011);$CLJS.xF=new $CLJS.M(null,"sum","sum",136986814);
$CLJS.yF=new $CLJS.M(null,"median","median",569566131);Cga=new $CLJS.M("metabase.lib.schema.mbql-clause","update-schemas","metabase.lib.schema.mbql-clause/update-schemas",-447263953);$CLJS.zF=new $CLJS.M(null,"stddev","stddev",-865474939);$CLJS.AF=new $CLJS.M(null,"trim","trim",774319767);$CLJS.BF=new $CLJS.M(null,"!\x3d","!\x3d",-1841737356);$CLJS.CF=new $CLJS.M(null,"ltrim","ltrim",1654269283);$CLJS.DF=new $CLJS.M(null,"category","category",-593092832);
$CLJS.EF=new $CLJS.M(null,"sum-where","sum-where",2135348428);$CLJS.FF=new $CLJS.M(null,"/","/",1282502798);$CLJS.GF=new $CLJS.M(null,"cum-sum","cum-sum",2064902349);$CLJS.HF=new $CLJS.M(null,"log","log",-1595516004);$CLJS.IF=new $CLJS.M(null,"replace","replace",-786587770);$CLJS.JF=new $CLJS.M(null,"rtrim","rtrim",-661336449);var uE=$CLJS.Ze($CLJS.dh),zE;$CLJS.Y($CLJS.PD,vE());$CLJS.cB(uE,Cga,function(){return $CLJS.Y($CLJS.PD,vE())});
$CLJS.KF=function(){function a(d,e,f,k){c.g?c.g(d,k):c.call(null,d,k);$CLJS.ND.m(null,d,function(){return f});return null}function b(d,e){var f=$CLJS.Bh.g("mbql.clause",$CLJS.ih(d));$CLJS.Y(f,e);$CLJS.Jd($CLJS.q(uE),d)||$CLJS.Qh.j(uE,$CLJS.de,d);return null}var c=null;c=function(d,e,f,k){switch(arguments.length){case 2:return b.call(this,d,e);case 4:return a.call(this,d,e,f,k)}throw Error("Invalid arity: "+arguments.length);};c.g=b;c.v=a;return c}();
zE=function zE(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return zE.l(arguments[0],1<c.length?new $CLJS.w(c.slice(1),0,null):null)};
zE.l=function(a,b){return new $CLJS.Q(null,2,5,$CLJS.R,[$CLJS.Uk,$CLJS.gg.g(new $CLJS.Q(null,4,5,$CLJS.R,[$CLJS.Xq,new $CLJS.h(null,1,[$CLJS.ss,["Valid ",$CLJS.p.h(a)," clause"].join("")],null),new $CLJS.Q(null,2,5,$CLJS.R,[$CLJS.pj,new $CLJS.Q(null,2,5,$CLJS.R,[$CLJS.Nj,a],null)],null),new $CLJS.Q(null,2,5,$CLJS.R,[$CLJS.Yi,new $CLJS.Q(null,2,5,$CLJS.R,[$CLJS.Uk,new $CLJS.Q(null,2,5,$CLJS.R,[$CLJS.W,$CLJS.yD],null)],null)],null)],null),b)],null)};zE.A=1;
zE.B=function(a){var b=$CLJS.z(a);a=$CLJS.B(a);return this.l(b,a)};var xE=function xE(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return xE.l(arguments[0],1<c.length?new $CLJS.w(c.slice(1),0,null):null)};
xE.l=function(a,b){return $CLJS.gg.g(new $CLJS.Q(null,4,5,$CLJS.R,[$CLJS.ir,new $CLJS.h(null,1,[$CLJS.ss,["Valid ",$CLJS.p.h(a)," clause"].join("")],null),new $CLJS.Q(null,2,5,$CLJS.R,[$CLJS.Nj,a],null),new $CLJS.Q(null,2,5,$CLJS.R,[$CLJS.W,$CLJS.yD],null)],null),b)};xE.A=1;xE.B=function(a){var b=$CLJS.z(a);a=$CLJS.B(a);return this.l(b,a)};
var wE=function wE(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return wE.l(arguments[0],arguments[1],2<c.length?new $CLJS.w(c.slice(2),0,null):null)};wE.l=function(a,b,c){c=$CLJS.E.g($CLJS.z(c),$CLJS.Yr)?$CLJS.ge($CLJS.id(c),$CLJS.df(2,c)):$CLJS.ge(null,c);var d=$CLJS.y(c);c=$CLJS.z(d);d=$CLJS.B(d);a=$CLJS.P.j(a,b,d);return $CLJS.n(c)?$CLJS.KF.v(b,$CLJS.Yr,c,a):$CLJS.KF.g(b,a)};wE.A=2;
wE.B=function(a){var b=$CLJS.z(a),c=$CLJS.B(a);a=$CLJS.z(c);c=$CLJS.B(c);return this.l(b,a,c)};